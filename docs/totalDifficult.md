实践一下
让我们来计算一个区块的难度。
以太坊的区块链是公开的，可以在这里查看：https://link.zhihu.com/?target=https%3A//etherchain.org/

现在我们将根据4212371区块的难度来计算4212372区块的难度。

先查看下4212371区块的难度和时间戳，难度为2,117,963,098,883,076，时间戳是2017-08-28 11:24:23。

再来看下4212372区块的时间戳，时间戳是2017-08-28 11:25:43。

现在需要的信息都有了。

parent_timestamp = 2017-08-28 11:24:23

parent_diff = 2,117,963,098,883,076

block_timestamp = 2017-08-28 11:25:43

block_number = 4212372

先算难度炸弹：

INT(2**((4212372 // 100000) - 2)) =

INT(2**(42 - 2)) = INT(2**40) = 2**40 = 1099511627776

再算难度调整：

2117963098883076 // 2048 * MAX(1 - (2017-08-28 11:25:43 - 2017-08-28 11:24:23) // 10, -99) = 

2117963098883076 // 2048 * MAX(1 - (2017-08-28 11:25:43 - 2017-08-28 11:24:23) // 10, -99) = 

2117963098883076 // 2048 * MAX(1 - 80 // 10, -99) = 

2117963098883076 // 2048 * MAX(1 - 8, -99) = 

2117963098883076 // 2048 * MAX(-7, -99) = 

2117963098883076 // 2048 * -7 = 

1034161669376 * -7 = -7239131685632

最终的难度为：

block_diff = 2117963098883076 - 7239131685632 + 1099511627776 = 2,111,823,478,825,220

检查下是不是大于创世区块的难度131072，显然满足条件。

是不是和查到的一模一样？4212372区块的难度为2,111,823,478,825,220。